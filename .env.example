# Balda Game Server - Environment Variables
# Copy this file to .env and update values for your environment
# Configuration uses c12 (smart config loader) - see balda.config.ts for defaults

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================

# Server port (default: 3000)
PORT=3000

# Server hostname (default: localhost)
HOST=localhost

# Node environment: development, production, or test (default: development)
NODE_ENV=development

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection URL (REQUIRED)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://balda:balda@localhost:5432/balda

# Maximum number of database connections in the pool (default: 20)
DB_MAX_CONNECTIONS=20

# Idle connection timeout in seconds (default: 20)
DB_IDLE_TIMEOUT=20

# Connection timeout in seconds (default: 10)
DB_CONNECT_TIMEOUT=10

# Use prepared statements for performance (default: true)
DB_PREPARED_STATEMENTS=true

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================

# JWT secret for signing access tokens (REQUIRED FOR PRODUCTION)
# Generate with: openssl rand -base64 32
JWT_SECRET=change-me-in-production

# JWT secret for signing refresh tokens (REQUIRED FOR PRODUCTION)
# Generate with: openssl rand -base64 32
JWT_REFRESH_SECRET=change-me-refresh-in-production

# Access token expiration time (default: 1h)
# Examples: 15m, 1h, 2d
JWT_ACCESS_TOKEN_EXPIRY=1h

# Refresh token expiration time (default: 7d)
# Examples: 7d, 30d, 90d
JWT_REFRESH_TOKEN_EXPIRY=7d

# ============================================================================
# LOGGING CONFIGURATION
# ============================================================================

# Log level: debug, info, warn, error, silent (default: info in production, debug in development)
LOG_LEVEL=debug

# Log format: json or pretty (default: json in production, pretty in development)
LOG_FORMAT=pretty

# Enable colored output (default: true in development, false in production)
LOG_COLORS=true

# ============================================================================
# RATE LIMITING
# ============================================================================

# Enable rate limiting (default: true)
RATE_LIMIT_ENABLED=true

# Rate limit window duration in milliseconds (default: 60000 = 1 minute)
RATE_LIMIT_DURATION=60000

# Maximum requests per window per IP (default: 100)
RATE_LIMIT_MAX=100

# ============================================================================
# CORS CONFIGURATION
# ============================================================================

# CORS allowed origins (default: true for all origins)
# Use "true" for all origins, or comma-separated list of domains
# Examples: "true", "http://localhost:5173,https://balda.example.com"
CORS_ORIGIN=true

# Allow credentials in CORS requests (default: true)
CORS_CREDENTIALS=true

# ============================================================================
# DICTIONARY CONFIGURATION
# ============================================================================

# Path to dictionary file (one word per line, optional)
# Included: 50,910 Russian words in ./data/dictionaries/russian.txt
DICT_PATH=./data/dictionaries/russian.txt

# Allow all words (testing only, default: false)
DICT_ALLOW_ALL=false

# ============================================================================
# STORAGE CONFIGURATION
# ============================================================================

# Directory for storing game data (default: ./data/games)
STORAGE_DIR=./data/games

# ============================================================================
# WEBSOCKET CONFIGURATION
# ============================================================================

# Archive delay for inactive games in milliseconds (default: 300000 = 5 minutes)
WS_ARCHIVE_DELAY_MS=300000

# ============================================================================
# API DOCUMENTATION (SWAGGER)
# ============================================================================

# Enable Swagger UI (default: true in development, false in production)
SWAGGER_ENABLED=true

# Swagger UI path (default: /swagger)
SWAGGER_PATH=/swagger

# ============================================================================
# WEB FRONTEND CONFIGURATION (for Vite)
# ============================================================================

# Backend API URL for web frontend (default: http://localhost:3000)
VITE_API_URL=http://localhost:3000

# ============================================================================
# FUTURE FEATURES (Not yet implemented)
# ============================================================================

# Sentry DSN for backend error tracking
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Sentry DSN for frontend error tracking
# VITE_SENTRY_DSN=https://your-frontend-sentry-dsn@sentry.io/project-id

# Redis connection for WebSocket scaling
# REDIS_URL=redis://localhost:6379

# Development Tools
# ENABLE_DRIZZLE_STUDIO=false
# DRIZZLE_STUDIO_PORT=4983
